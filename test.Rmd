---
output:
  html_document: 
    self_contained: no
  pdf_document: default
---

```{r results='asis', warning=FALSE}
require(ggplot2)
require(dplyr)
require(splitstackshape)
require(googleVis)
op <- options(gvis.plot.tag="chart")

Data2017 = read.csv('data/survey_results_public.csv')
Education = Data2017 %>% select(Respondent,EducationTypes,SelfTaughtTypes,DeveloperType) %>% 
  filter(!is.na(EducationTypes) & !is.na(EducationTypes) & DeveloperType %in% 
           c('Data scientist','Machine learning specialist','Developer with a statistics or mathematics background'))

Education_long <- cSplit(indt = Education, 
                         splitCols = c('EducationTypes','SelfTaughtTypes','DeveloperType'), sep = ";", direction = "long")

x = data.frame(table(Education_long$DeveloperType,Education_long$EducationTypes))
y = data.frame(table(Education_long$EducationTypes,Education_long$SelfTaughtTypes))

defaulter<-rbind(x,y)

# Plotting
library(googleVis)
sk2 <- gvisSankey(defaulter, from='Var1', to='Var2', weight='Freq',
                  options=list(height=400, width=600))

print(sk2)
```